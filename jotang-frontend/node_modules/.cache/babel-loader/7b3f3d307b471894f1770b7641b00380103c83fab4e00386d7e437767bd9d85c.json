{"ast":null,"code":"import { reactive, ref } from 'vue';\nimport apiClient from '../services/api';\n\n//\n\nexport default {\n  __name: 'ProductOrder',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const order = reactive({\n      productId: null,\n      buyerId: null,\n      // 实际应用中 buyerId 应从当前登录用户获取\n      status: 'pending'\n    });\n    const successMsg = ref('');\n    const errorMsg = ref('');\n\n    // POST /product-orders\n    const createOrder = async () => {\n      try {\n        successMsg.value = '';\n        errorMsg.value = '';\n\n        // ProductOrderController.java 使用了 @RequestBody\n        const response = await apiClient.post('/product-orders', order);\n        if (response.data.code === 1) {\n          //\n          successMsg.value = '订单创建成功！';\n          // 重置表单\n          Object.assign(order, {\n            productId: null,\n            buyerId: null,\n            status: 'pending'\n          });\n        } else {\n          errorMsg.value = response.data.msg || '订单创建失败。';\n        }\n      } catch (error) {\n        console.error('创建订单异常:', error);\n        errorMsg.value = error.response?.data?.msg || '服务器错误。';\n      }\n    };\n    const __returned__ = {\n      order,\n      successMsg,\n      errorMsg,\n      createOrder,\n      reactive,\n      ref,\n      get apiClient() {\n        return apiClient;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","apiClient","order","productId","buyerId","status","successMsg","errorMsg","createOrder","value","response","post","data","code","Object","assign","msg","error","console"],"sources":["G:/vue-project/jotang-frontend/src/views/ProductOrder.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>创建订单</h2>\r\n    <form @submit.prevent=\"createOrder\">\r\n      <div>\r\n        <label>商品ID: </label>\r\n        <input v-model.number=\"order.productId\" type=\"number\" required />\r\n      </div>\r\n      <div>\r\n        <label>购买者ID: </label>\r\n        <input v-model.number=\"order.buyerId\" type=\"number\" required />\r\n      </div>\r\n      <div>\r\n        <label>状态: </label>\r\n        <input v-model=\"order.status\" type=\"text\" placeholder=\"e.g., pending\" required/>\r\n      </div>\r\n      <button type=\"submit\">提交订单</button>\r\n      <p v-if=\"successMsg\" style=\"color: green\">{{ successMsg }}</p>\r\n      <p v-if=\"errorMsg\" style=\"color: red\">{{ errorMsg }}</p>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from 'vue';\r\nimport apiClient from '../services/api';\r\n\r\n//\r\nconst order = reactive({\r\n  productId: null,\r\n  buyerId: null, // 实际应用中 buyerId 应从当前登录用户获取\r\n  status: 'pending'\r\n});\r\n\r\nconst successMsg = ref('');\r\nconst errorMsg = ref('');\r\n\r\n// POST /product-orders\r\nconst createOrder = async () => {\r\n  try {\r\n    successMsg.value = '';\r\n    errorMsg.value = '';\r\n    \r\n    // ProductOrderController.java 使用了 @RequestBody\r\n    const response = await apiClient.post('/product-orders', order);\r\n\r\n    if (response.data.code === 1) { //\r\n      successMsg.value = '订单创建成功！';\r\n      // 重置表单\r\n      Object.assign(order, { productId: null, buyerId: null, status: 'pending' });\r\n    } else {\r\n      errorMsg.value = response.data.msg || '订单创建失败。';\r\n    }\r\n  } catch (error) {\r\n    console.error('创建订单异常:', error);\r\n    errorMsg.value = error.response?.data?.msg || '服务器错误。';\r\n  }\r\n};\r\n</script>"],"mappings":"AAwBA,SAASA,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AACnC,OAAOC,SAAS,MAAM,iBAAiB;;AAEvC;;;;;;;;IACA,MAAMC,KAAK,GAAGH,QAAQ,CAAC;MACrBI,SAAS,EAAE,IAAI;MACfC,OAAO,EAAE,IAAI;MAAE;MACfC,MAAM,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMO,QAAQ,GAAGP,GAAG,CAAC,EAAE,CAAC;;IAExB;IACA,MAAMQ,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACFF,UAAU,CAACG,KAAK,GAAG,EAAE;QACrBF,QAAQ,CAACE,KAAK,GAAG,EAAE;;QAEnB;QACA,MAAMC,QAAQ,GAAG,MAAMT,SAAS,CAACU,IAAI,CAAC,iBAAiB,EAAET,KAAK,CAAC;QAE/D,IAAIQ,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,CAAC,EAAE;UAAE;UAC9BP,UAAU,CAACG,KAAK,GAAG,SAAS;UAC5B;UACAK,MAAM,CAACC,MAAM,CAACb,KAAK,EAAE;YAAEC,SAAS,EAAE,IAAI;YAAEC,OAAO,EAAE,IAAI;YAAEC,MAAM,EAAE;UAAU,CAAC,CAAC;QAC7E,CAAC,MAAM;UACLE,QAAQ,CAACE,KAAK,GAAGC,QAAQ,CAACE,IAAI,CAACI,GAAG,IAAI,SAAS;QACjD;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;QAC/BV,QAAQ,CAACE,KAAK,GAAGQ,KAAK,CAACP,QAAQ,EAAEE,IAAI,EAAEI,GAAG,IAAI,QAAQ;MACxD;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}