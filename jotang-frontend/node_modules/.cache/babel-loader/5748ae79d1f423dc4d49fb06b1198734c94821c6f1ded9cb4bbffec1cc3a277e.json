{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuth } from '@/store/auth.js';\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      isAuthenticated,\n      clearToken\n    } = useAuth();\n    const apiResponse = ref('... 等待操作 ...');\n    const router = useRouter();\n\n    // 接收来自子路由(页面)的 API 响应\n    function handleApiResponse(data) {\n      apiResponse.value = JSON.stringify(data, null, 2);\n    }\n\n    // 处理退出登录\n    function handleLogout() {\n      clearToken();\n      handleApiResponse({\n        code: 1,\n        msg: \"已退出登录\",\n        data: null\n      }); //\n      router.push('/auth'); // 退出后跳转到登录页\n    }\n    const __returned__ = {\n      isAuthenticated,\n      clearToken,\n      apiResponse,\n      router,\n      handleApiResponse,\n      handleLogout,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useAuth() {\n        return useAuth;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","useAuth","isAuthenticated","clearToken","apiResponse","router","handleApiResponse","data","value","JSON","stringify","handleLogout","code","msg","push"],"sources":["G:/vue-project/jotang-frontend/src/App.vue"],"sourcesContent":["<template>\n  <div>\n    <header>\n      <h1>API 功能演示 (Vue 3 + Router)</h1>\n\n      <nav>\n        <router-link to=\"/\">首页</router-link> |\n        <router-link to=\"/auth\">登录/注册</router-link> |\n        <router-link to=\"/products\">商品</router-link> |\n        <router-link to=\"/orders\">订单</router-link>\n      </nav>\n\n      <div class=\"status-bar\">\n        <strong>当前状态:</strong>\n        <span v-if=\"isAuthenticated\">已登录</span>\n        <span v-else>未登录</span>\n        <button v-if=\"isAuthenticated\" @click=\"handleLogout\" id=\"logoutButton\">\n          退出登录\n        </button>\n      </div>\n    </header>\n\n    <main>\n      <router-view @response=\"handleApiResponse\" />\n    </main>\n\n    <div class=\"response-area\">\n      <h3>API 响应:</h3>\n      <pre>{{ apiResponse }}</pre>\n    </div>\n\n  </div> </template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuth } from '@/store/auth.js'\n\nconst { isAuthenticated, clearToken } = useAuth()\nconst apiResponse = ref('... 等待操作 ...')\nconst router = useRouter()\n\n// 接收来自子路由(页面)的 API 响应\nfunction handleApiResponse(data) {\n  apiResponse.value = JSON.stringify(data, null, 2)\n}\n\n// 处理退出登录\nfunction handleLogout() {\n  clearToken()\n  handleApiResponse({ code: 1, msg: \"已退出登录\", data: null }) //\n  router.push('/auth') // 退出后跳转到登录页\n}\n</script>\n\n<style scoped>\nheader {\n  background: #f9f9f9;\n  padding: 10px 20px;\n  border-bottom: 1px solid #ddd;\n}\nnav {\n  margin: 10px 0;\n}\nnav a {\n  font-weight: bold;\n  color: #2c3e50;\n  margin-right: 10px;\n}\nnav a.router-link-exact-active {\n  color: #42b983;\n}\nmain {\n  padding: 20px;\n}\n</style>"],"mappings":";AAkCA,SAASA,GAAG,QAAQ,KAAI;AACxB,SAASC,SAAS,QAAQ,YAAW;AACrC,SAASC,OAAO,QAAQ,iBAAgB;;;;;;;IAExC,MAAM;MAAEC,eAAe;MAAEC;IAAW,CAAC,GAAGF,OAAO,CAAC;IAChD,MAAMG,WAAW,GAAGL,GAAG,CAAC,cAAc;IACtC,MAAMM,MAAM,GAAGL,SAAS,CAAC;;IAEzB;IACA,SAASM,iBAAiBA,CAACC,IAAI,EAAE;MAC/BH,WAAW,CAACI,KAAK,GAAGC,IAAI,CAACC,SAAS,CAACH,IAAI,EAAE,IAAI,EAAE,CAAC;IAClD;;IAEA;IACA,SAASI,YAAYA,CAAA,EAAG;MACtBR,UAAU,CAAC;MACXG,iBAAiB,CAAC;QAAEM,IAAI,EAAE,CAAC;QAAEC,GAAG,EAAE,OAAO;QAAEN,IAAI,EAAE;MAAK,CAAC,CAAC,EAAC;MACzDF,MAAM,CAACS,IAAI,CAAC,OAAO,CAAC,EAAC;IACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}