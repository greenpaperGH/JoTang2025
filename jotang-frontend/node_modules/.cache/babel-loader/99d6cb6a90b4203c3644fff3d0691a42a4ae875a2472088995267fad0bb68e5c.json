{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"form-group\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"fieldset\", null, [_cache[12] || (_cache[12] = _createElementVNode(\"legend\", null, \"2. 商品 (Products)\", -1 /* CACHED */)), _createElementVNode(\"div\", {\n    class: \"form-group\"\n  }, [_cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"获取商品列表 (公开)\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: $setup.handleListProducts\n  }, \"获取所有商品\")]), _createElementVNode(\"div\", _hoisted_1, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"创建新商品 (需要Auth)\", -1 /* CACHED */)), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleCreateProduct, [\"prevent\"])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.createData.title = $event),\n    placeholder: \"标题\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.createData.title]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.createData.description = $event),\n    placeholder: \"描述\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.createData.description]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.createData.type = $event),\n    placeholder: \"类型\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.createData.type]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.createData.price = $event),\n    placeholder: \"价格\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.createData.price, void 0, {\n    number: true\n  }]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.createData.status = $event),\n    placeholder: \"状态\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.createData.status]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.createData.publisherId = $event),\n    placeholder: \"发布者ID\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.createData.publisherId, void 0, {\n    number: true\n  }]]), _cache[8] || (_cache[8] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"创建商品\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"div\", _hoisted_2, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"删除商品 (需要Auth)\", -1 /* CACHED */)), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleDeleteProduct, [\"prevent\"])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.deleteId = $event),\n    placeholder: \"要删除的商品ID\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.deleteId, void 0, {\n    number: true\n  }]]), _cache[10] || (_cache[10] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"删除商品\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","onClick","$setup","handleListProducts","_hoisted_1","onSubmit","_withModifiers","handleCreateProduct","type","createData","title","$event","placeholder","required","description","price","number","status","publisherId","_hoisted_2","handleDeleteProduct","deleteId"],"sources":["G:\\vue-project\\jotang-frontend\\src\\views\\ProductView.vue"],"sourcesContent":["<template>\r\n    <fieldset>\r\n        <legend>2. 商品 (Products)</legend>\r\n        \r\n        <div class=\"form-group\">\r\n            <h3>获取商品列表 (公开)</h3>\r\n            <button @click=\"handleListProducts\">获取所有商品</button>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <h3>创建新商品 (需要Auth)</h3>\r\n            <form @submit.prevent=\"handleCreateProduct\">\r\n                <input type=\"text\" v-model=\"createData.title\" placeholder=\"标题\" required>\r\n                <input type=\"text\" v-model=\"createData.description\" placeholder=\"描述\">\r\n                <input type=\"text\" v-model=\"createData.type\" placeholder=\"类型\" required>\r\n                <input type=\"number\" v-model.number=\"createData.price\" placeholder=\"价格\" required>\r\n                <input type=\"text\" v-model=\"createData.status\" placeholder=\"状态\" required>\r\n                <input type=\"number\" v-model.number=\"createData.publisherId\" placeholder=\"发布者ID\" required>\r\n                <button type=\"submit\">创建商品</button>\r\n            </form>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <h3>删除商品 (需要Auth)</h3>\r\n            <form @submit.prevent=\"handleDeleteProduct\">\r\n                <input type=\"number\" v-model.number=\"deleteId\" placeholder=\"要删除的商品ID\" required>\r\n                <button type=\"submit\">删除商品</button>\r\n            </form>\r\n        </div>\r\n    </fieldset>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { apiFetch } from '@/services/apiService.js'\r\n\r\n// 1. 定义 emit 函数\r\nconst emit = defineEmits(['response'])\r\n\r\n// 2. 创建商品表单的响应式数据\r\nconst createData = ref({\r\n    title: '',\r\n    description: '',\r\n    type: '',\r\n    price: null,\r\n    status: '',\r\n    publisherId: null\r\n})\r\n\r\n// 3. 删除商品表单的响应式数据\r\nconst deleteId = ref(null)\r\n\r\n// 4. 获取商品列表\r\nasync function handleListProducts() {\r\n    try {\r\n        //\r\n        const result = await apiFetch('/products')\r\n        emit('response', result) //\r\n    } catch (error) {\r\n        emit('response', { code: 0, msg: error.message, data: null }) //\r\n    }\r\n}\r\n\r\n// 5. 创建商品\r\nasync function handleCreateProduct() {\r\n    try {\r\n        //\r\n        const result = await apiFetch('/products', {\r\n            method: 'POST',\r\n            body: JSON.stringify(createData.value)\r\n        })\r\n        emit('response', result) //\r\n        // 清空表单\r\n        createData.value = { title: '', description: '', type: '', price: null, status: '', publisherId: null }\r\n    } catch (error) {\r\n        emit('response', { code: 0, msg: error.message, data: null }) //\r\n    }\r\n}\r\n\r\n// 6. 删除商品\r\nasync function handleDeleteProduct() {\r\n    if (!deleteId.value) return;\r\n    try {\r\n        //\r\n        const result = await apiFetch(`/products/${deleteId.value}`, {\r\n            method: 'DELETE'\r\n        })\r\n        emit('response', result) //\r\n        deleteId.value = null\r\n    } catch (error) {\r\n        emit('response', { code: 0, msg: error.message, data: null }) //\r\n    }\r\n}\r\n</script>"],"mappings":";;EASaA,KAAK,EAAC;AAAY;;EAalBA,KAAK,EAAC;AAAY;;uBArB3BC,mBAAA,CA4BW,mB,4BA3BPC,mBAAA,CAAiC,gBAAzB,kBAAgB,qBAExBA,mBAAA,CAGM;IAHDF,KAAK,EAAC;EAAY,I,0BACnBE,mBAAA,CAAoB,YAAhB,aAAW,qBACfA,mBAAA,CAAmD;IAA1CC,OAAK,EAAEC,MAAA,CAAAC;EAAkB,GAAE,QAAM,E,GAG9CH,mBAAA,CAWM,OAXNI,UAWM,G,0BAVFJ,mBAAA,CAAuB,YAAnB,gBAAc,qBAClBA,mBAAA,CAQO;IARAK,QAAM,EAAAC,cAAA,CAAUJ,MAAA,CAAAK,mBAAmB;sBACtCP,mBAAA,CAAwE;IAAjEQ,IAAI,EAAC,MAAM;+DAAUN,MAAA,CAAAO,UAAU,CAACC,KAAK,GAAAC,MAAA;IAAEC,WAAW,EAAC,IAAI;IAACC,QAAQ,EAAR;iDAAnCX,MAAA,CAAAO,UAAU,CAACC,KAAK,E,mBAC5CV,mBAAA,CAAqE;IAA9DQ,IAAI,EAAC,MAAM;+DAAUN,MAAA,CAAAO,UAAU,CAACK,WAAW,GAAAH,MAAA;IAAEC,WAAW,EAAC;iDAApCV,MAAA,CAAAO,UAAU,CAACK,WAAW,E,mBAClDd,mBAAA,CAAuE;IAAhEQ,IAAI,EAAC,MAAM;+DAAUN,MAAA,CAAAO,UAAU,CAACD,IAAI,GAAAG,MAAA;IAAEC,WAAW,EAAC,IAAI;IAACC,QAAQ,EAAR;iDAAlCX,MAAA,CAAAO,UAAU,CAACD,IAAI,E,mBAC3CR,mBAAA,CAAiF;IAA1EQ,IAAI,EAAC,QAAQ;+DAAiBN,MAAA,CAAAO,UAAU,CAACM,KAAK,GAAAJ,MAAA;IAAEC,WAAW,EAAC,IAAI;IAACC,QAAQ,EAAR;iDAAnCX,MAAA,CAAAO,UAAU,CAACM,KAAK,E;IAAxBC,MAAM,EAAd;EAAiC,E,oBACtDhB,mBAAA,CAAyE;IAAlEQ,IAAI,EAAC,MAAM;+DAAUN,MAAA,CAAAO,UAAU,CAACQ,MAAM,GAAAN,MAAA;IAAEC,WAAW,EAAC,IAAI;IAACC,QAAQ,EAAR;iDAApCX,MAAA,CAAAO,UAAU,CAACQ,MAAM,E,mBAC7CjB,mBAAA,CAA0F;IAAnFQ,IAAI,EAAC,QAAQ;+DAAiBN,MAAA,CAAAO,UAAU,CAACS,WAAW,GAAAP,MAAA;IAAEC,WAAW,EAAC,OAAO;IAACC,QAAQ,EAAR;iDAA5CX,MAAA,CAAAO,UAAU,CAACS,WAAW,E;IAA9BF,MAAM,EAAd;EAAuC,E,8BAC5DhB,mBAAA,CAAmC;IAA3BQ,IAAI,EAAC;EAAQ,GAAC,MAAI,oB,8BAIlCR,mBAAA,CAMM,OANNmB,UAMM,G,4BALFnB,mBAAA,CAAsB,YAAlB,eAAa,qBACjBA,mBAAA,CAGO;IAHAK,QAAM,EAAAC,cAAA,CAAUJ,MAAA,CAAAkB,mBAAmB;sBACtCpB,mBAAA,CAA+E;IAAxEQ,IAAI,EAAC,QAAQ;+DAAiBN,MAAA,CAAAmB,QAAQ,GAAAV,MAAA;IAAEC,WAAW,EAAC,UAAU;IAACC,QAAQ,EAAR;iDAAjCX,MAAA,CAAAmB,QAAQ,E;IAAhBL,MAAM,EAAd;EAAyB,E,gCAC9ChB,mBAAA,CAAmC;IAA3BQ,IAAI,EAAC;EAAQ,GAAC,MAAI,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}