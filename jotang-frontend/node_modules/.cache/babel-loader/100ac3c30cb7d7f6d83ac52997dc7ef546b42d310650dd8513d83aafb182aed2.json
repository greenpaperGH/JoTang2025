{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport apiClient from '@/services/apiClient';\nexport default {\n  __name: 'SignupView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    // 使用 reactive 来处理表单对象\n    const user = reactive({\n      username: '',\n      password: '',\n      role: 'buyer',\n      // 默认角色\n      phone: ''\n    });\n    const error = ref(null);\n    const success = ref(null);\n    const handleSubmit = async () => {\n      error.value = null;\n      success.value = null;\n      try {\n        // 对应 SignupController 的 @RequestBody，apiClient 会发送 JSON\n        const result = await apiClient('/signup', 'POST', user);\n        if (result.code === 1) {\n          success.value = '注册成功！即将跳转到登录页...';\n          setTimeout(() => {\n            router.push({\n              name: 'Login'\n            });\n          }, 2000);\n        } else {\n          error.value = result.msg || '注册失败。';\n        }\n      } catch (err) {\n        error.value = err.message || '发生错误。';\n      }\n    };\n    const __returned__ = {\n      router,\n      user,\n      error,\n      success,\n      handleSubmit,\n      ref,\n      reactive,\n      get useRouter() {\n        return useRouter;\n      },\n      get apiClient() {\n        return apiClient;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","useRouter","apiClient","router","user","username","password","role","phone","error","success","handleSubmit","value","result","code","setTimeout","push","name","msg","err","message"],"sources":["G:/vue-project/jotang-frontend/src/views/SignupView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>注册新用户</h2>\r\n    <form @submit.prevent=\"handleSubmit\">\r\n      <div>\r\n        <label for=\"username\">用户名:</label>\r\n        <input type=\"text\" v-model=\"user.username\" id=\"username\" required>\r\n      </div>\r\n      <div>\r\n        <label for=\"password\">密码:</label>\r\n        <input type=\"password\" v-model=\"user.password\" id=\"password\" required>\r\n      </div>\r\n      <div>\r\n        <label for=\"role\">角色 (例如: buyer, publisher):</label>\r\n        <input type=\"text\" v-model=\"user.role\" id=\"role\" required>\r\n      </div>\r\n      <div>\r\n        <label for=\"phone\">电话:</label>\r\n        <input type=\"tel\" v-model=\"user.phone\" id=\"phone\">\r\n      </div>\r\n      <button type=\"submit\">注册</button>\r\n      <p v-if=\"error\" style=\"color: red;\">{{ error }}</p>\r\n      <p v-if=\"success\" style=\"color: green;\">{{ success }}</p>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport apiClient from '@/services/apiClient';\r\n\r\nconst router = useRouter();\r\n// 使用 reactive 来处理表单对象\r\nconst user = reactive({\r\n  username: '',\r\n  password: '',\r\n  role: 'buyer', // 默认角色\r\n  phone: ''\r\n});\r\nconst error = ref(null);\r\nconst success = ref(null);\r\n\r\nconst handleSubmit = async () => {\r\n  error.value = null;\r\n  success.value = null;\r\n  try {\r\n    // 对应 SignupController 的 @RequestBody，apiClient 会发送 JSON\r\n    const result = await apiClient('/signup', 'POST', user);\r\n\r\n    if (result.code === 1) {\r\n      success.value = '注册成功！即将跳转到登录页...';\r\n      setTimeout(() => {\r\n        router.push({ name: 'Login' });\r\n      }, 2000);\r\n    } else {\r\n      error.value = result.msg || '注册失败。';\r\n    }\r\n  } catch (err) {\r\n    error.value = err.message || '发生错误。';\r\n  }\r\n};\r\n</script>"],"mappings":";AA4BA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,SAAS,MAAM,sBAAsB;;;;;;;IAE5C,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B;IACA,MAAMG,IAAI,GAAGJ,QAAQ,CAAC;MACpBK,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,IAAI,EAAE,OAAO;MAAE;MACfC,KAAK,EAAE;IACT,CAAC,CAAC;IACF,MAAMC,KAAK,GAAGV,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMW,OAAO,GAAGX,GAAG,CAAC,IAAI,CAAC;IAEzB,MAAMY,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/BF,KAAK,CAACG,KAAK,GAAG,IAAI;MAClBF,OAAO,CAACE,KAAK,GAAG,IAAI;MACpB,IAAI;QACF;QACA,MAAMC,MAAM,GAAG,MAAMX,SAAS,CAAC,SAAS,EAAE,MAAM,EAAEE,IAAI,CAAC;QAEvD,IAAIS,MAAM,CAACC,IAAI,KAAK,CAAC,EAAE;UACrBJ,OAAO,CAACE,KAAK,GAAG,kBAAkB;UAClCG,UAAU,CAAC,MAAM;YACfZ,MAAM,CAACa,IAAI,CAAC;cAAEC,IAAI,EAAE;YAAQ,CAAC,CAAC;UAChC,CAAC,EAAE,IAAI,CAAC;QACV,CAAC,MAAM;UACLR,KAAK,CAACG,KAAK,GAAGC,MAAM,CAACK,GAAG,IAAI,OAAO;QACrC;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZV,KAAK,CAACG,KAAK,GAAGO,GAAG,CAACC,OAAO,IAAI,OAAO;MACtC;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}