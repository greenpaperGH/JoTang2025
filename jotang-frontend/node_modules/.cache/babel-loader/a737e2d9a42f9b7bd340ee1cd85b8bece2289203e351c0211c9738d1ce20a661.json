{"ast":null,"code":"// src/utils/auth.js\nimport { ref, computed } from 'vue';\nconst TOKEN_KEY = 'jwt_token';\n\n// 响应式的 token 引用，从 localStorage 初始化\nconst token = ref(localStorage.getItem(TOKEN_KEY));\n\n/**\r\n * 保存 token 到 localStorage 和响应式引用中\r\n * @param {string} newToken \r\n */\nfunction saveToken(newToken) {\n  localStorage.setItem(TOKEN_KEY, newToken);\n  token.value = newToken;\n}\n\n/**\r\n * 从 localStorage 和响应式引用中移除 token\r\n */\nfunction removeToken() {\n  localStorage.removeItem(TOKEN_KEY);\n  token.value = null;\n}\n\n/**\r\n * 获取当前的 token\r\n * @returns {string | null}\r\n */\nfunction getToken() {\n  return token.value;\n}\n\n// 一个计算属性，用于判断用户是否登录\nconst isLoggedIn = computed(() => !!token.value);\n\n/**\r\n * 导出一个 Composable 函数\r\n */\nexport function useAuth() {\n  return {\n    saveToken,\n    getToken,\n    removeToken,\n    isLoggedIn,\n    token\n  };\n}","map":{"version":3,"names":["ref","computed","TOKEN_KEY","token","localStorage","getItem","saveToken","newToken","setItem","value","removeToken","removeItem","getToken","isLoggedIn","useAuth"],"sources":["G:/vue-project/jotang-frontend/src/utils/auth.js"],"sourcesContent":["// src/utils/auth.js\r\nimport { ref, computed } from 'vue';\r\n\r\nconst TOKEN_KEY = 'jwt_token';\r\n\r\n// 响应式的 token 引用，从 localStorage 初始化\r\nconst token = ref(localStorage.getItem(TOKEN_KEY));\r\n\r\n/**\r\n * 保存 token 到 localStorage 和响应式引用中\r\n * @param {string} newToken \r\n */\r\nfunction saveToken(newToken) {\r\n    localStorage.setItem(TOKEN_KEY, newToken);\r\n    token.value = newToken;\r\n}\r\n\r\n/**\r\n * 从 localStorage 和响应式引用中移除 token\r\n */\r\nfunction removeToken() {\r\n    localStorage.removeItem(TOKEN_KEY);\r\n    token.value = null;\r\n}\r\n\r\n/**\r\n * 获取当前的 token\r\n * @returns {string | null}\r\n */\r\nfunction getToken() {\r\n    return token.value;\r\n}\r\n\r\n// 一个计算属性，用于判断用户是否登录\r\nconst isLoggedIn = computed(() => !!token.value);\r\n\r\n/**\r\n * 导出一个 Composable 函数\r\n */\r\nexport function useAuth() {\r\n    return {\r\n        saveToken,\r\n        getToken,\r\n        removeToken,\r\n        isLoggedIn,\r\n        token\r\n    };\r\n}"],"mappings":"AAAA;AACA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AAEnC,MAAMC,SAAS,GAAG,WAAW;;AAE7B;AACA,MAAMC,KAAK,GAAGH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACH,SAAS,CAAC,CAAC;;AAElD;AACA;AACA;AACA;AACA,SAASI,SAASA,CAACC,QAAQ,EAAE;EACzBH,YAAY,CAACI,OAAO,CAACN,SAAS,EAAEK,QAAQ,CAAC;EACzCJ,KAAK,CAACM,KAAK,GAAGF,QAAQ;AAC1B;;AAEA;AACA;AACA;AACA,SAASG,WAAWA,CAAA,EAAG;EACnBN,YAAY,CAACO,UAAU,CAACT,SAAS,CAAC;EAClCC,KAAK,CAACM,KAAK,GAAG,IAAI;AACtB;;AAEA;AACA;AACA;AACA;AACA,SAASG,QAAQA,CAAA,EAAG;EAChB,OAAOT,KAAK,CAACM,KAAK;AACtB;;AAEA;AACA,MAAMI,UAAU,GAAGZ,QAAQ,CAAC,MAAM,CAAC,CAACE,KAAK,CAACM,KAAK,CAAC;;AAEhD;AACA;AACA;AACA,OAAO,SAASK,OAAOA,CAAA,EAAG;EACtB,OAAO;IACHR,SAAS;IACTM,QAAQ;IACRF,WAAW;IACXG,UAAU;IACVV;EACJ,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}